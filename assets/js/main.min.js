function smoothScroll(a){$('a[href^="#"]').on("click",function(b){var c=$($(this).attr("href"));c.length&&(b.preventDefault(),$("html, body").animate({scrollTop:c.offset().top},a))})}function activateMenu(){var a=$(".nav"),b=$(".nav > ul");a.headroom({offset:205,tolerance:5,classes:{initial:"animated",pinned:"slideDown",unpinned:"slideUp"}}),$(".page-wrap").click(function(){b.slideUp()}),$(".nav-header a").on("click",{menu:b},function(a){$(a.data.menu).slideToggle()}),$(".nav ul a").on("click",{menu:b},function(a){$(this).parent("li").addClass("active").siblings("li").removeClass("active"),"none"!==a.data.menu.css("display")&&a.data.menu.slideUp()})}function work_toggle(){$(".work-tile-link").on("click",function(a){a.preventDefault();var b=$(this),c=b.attr("href"),d=b.attr("data-siteurl");console.log("Getting projects...",c,d),get_project(d,c.substr(1)),open_work(c)})}function get_project(a,b){var c='<div class="loader"><div class="innerLoader"></div></div>',d=a+"/projects/"+b+".html";$(".work-container").html(c),$.ajax({cache:!0,url:d}).done(function(){console.log("Project",d),$(".work-container").load(d,function(){close_work()})}).fail(function(){console.error(d,"not found"),$(".loader").remove(),$(".work-grid").slideDown("slow")})}function open_work(a){$(".work-container").find(a).slideDown("slow");$(".work-grid").slideUp("slow")}function close_work(){once($(".work-container .close").on("click",function(a){console.log("Closing..."),a.preventDefault(),$(this).parent(".work").slideUp(),$(".work-grid").slideDown("slow")}))}function handle_form_submit(){var a=$("#contact-form"),b=a.attr("action"),c=a.find("[type='submit']"),d=a.find("#contact-name"),e=a.find("#contact-email"),f=a.find("#contact-subject"),g=a.find("#contact-message"),h=a.find(".form-result");c.before('<input type="text" name="isBot" id="isBot"/>'),honeyPot=a.find("#isBot"),a.submit(function(){return d.removeClass("error"),e.removeClass("error"),f.removeClass("error"),g.removeClass("error"),validate(d,"text")||d.addClass("error").next(".error-message").text("What do I call you"),validate(e,"email")||e.addClass("error").next(".error-message").text("The email is not valid"),validate(f,"text")||f.addClass("error").next(".error-message").text("The subject is required"),validate(g,"text")||g.addClass("error").next(".error-message").text("Please write something"),a.find("input, textarea").hasClass("error")||""!==honeyPot.val()||(c.attr("disabled","disabled"),submit_test=c.val(),c.val("submitting..."),$.post(b,{name:d.val(),email:e.val(),subject:f.val(),message:g.val()},function(b){a.find(".form-input").val(""),c.attr("disabled",!1),c.val(submit_test),h.slideDown().css("display","block")},"json")),!1})}function validate(a,b){switch(b){case"email":result=validateEmail(a.val());break;case"text":result=a.val().length>0;break;default:result=!1}return result}function validateEmail(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)}function once(a,b){var c;return function(){return a&&(c=a.apply(b||this,arguments),a=null),c}}$(function(){smoothScroll(500),activateMenu(),work_toggle(),handle_form_submit()});